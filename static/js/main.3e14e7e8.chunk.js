(this["webpackJsonpweb-chat"]=this["webpackJsonpweb-chat"]||[]).push([[0],{116:function(e,t,n){"use strict";(function(e){var r=n(1),i=n(4),o=n(3),a=n(5),s=n(38),u=n(79),c=n(53),l=n(15),d=n(16),f=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),p=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),v=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&f(t,e,n);return p(t,e),t},g=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||f(t,e,n)},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WakuRelay=void 0;var m=h(n(495)),b=n(64),y=n(634),k=h(n(23)),T=v(n(186)),O=n(267),I=n(268);g(n(186),t),g(n(268),t);var _=function(t){l(f,t);var n=d(f);function f(e,t){var r;o(this,f),(r=n.call(this,e,Object.assign(t,{globalSignaturePolicy:y.SignaturePolicy.StrictNoSign}))).heartbeat=new I.RelayHeartbeat(s(r));var i=[T.RelayCodec];return Object.assign(s(r),{multicodecs:i}),r}return a(f,[{key:"start",value:function(){u(c(f.prototype),"start",this).call(this),u(c(f.prototype),"subscribe",this).call(this,T.RelayDefaultTopic)}},{key:"send",value:function(){var t=i(r.mark((function t(n){var i;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.toBinary(),t.next=3,u(c(f.prototype),"publish",this).call(this,T.RelayDefaultTopic,e.from(i));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"join",value:function(e){var t,n=this;if(!this.started)throw new Error("WakuRelayPubsub has not started");var r=this.fanout.get(e);if(r)r.forEach((function(e){n.score.score(e)<0&&r.delete(e)})),r.size<this._options.D&&O.getRelayPeers(this,e,this._options.D-r.size,(function(e){return!r.has(e)&&!n.direct.has(e)&&n.score.score(e)>=0})).forEach((function(e){return r.add(e)})),this.mesh.set(e,r),this.fanout.delete(e),this.lastpub.delete(e);else{var i=O.getRelayPeers(this,e,this._options.D,(function(e){return!n.direct.has(e)&&n.score.score(e)>=0}));this.mesh.set(e,i)}null===(t=this.mesh.get(e))||void 0===t||t.forEach((function(t){n.log("JOIN: Add mesh link to %s in %s",t,e),n._sendGraft(t,e)}))}},{key:"_publish",value:function(){var e=i(r.mark((function e(t){var n,i,o,a,s=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.receivedFrom!==this.peerId.toB58String()&&(this.score.deliverMessage(t),this.gossipTracer.deliverMessage(t)),n=this.getMsgId(t),i=b.messageIdToString(n),this.seenCache.put(i),this.messageCache.put(t),o=new Set,t.topicIDs.forEach((function(e){if(s.topics.get(e)){s.direct.forEach((function(e){o.add(e)}));var t=s.mesh.get(e);if(!t||!t.size){if(!(t=s.fanout.get(e))){var n=O.getRelayPeers(s,e,s._options.D,(function(e){return s.score.score(e)>=s._options.scoreThresholds.publishThreshold}));n.size>0?(t=n,s.fanout.set(e,n)):t=new Set}s.lastpub.set(e,s._now())}null===t||void 0===t||t.forEach((function(e){o.add(e)}))}})),a=b.createGossipRpc([m.default.utils.normalizeOutRpcMessage(t)]),o.forEach((function(e){e!==t.from&&s._sendRpc(e,a)}));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_emitGossip",value:function(e,t){var n=this,r=this.messageCache.getGossipIDs(e);if(r.length){b.shuffle(r),r.length>T.RelayMaxIHaveLength&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",r.length);var i=[],o=this.topics.get(e);if(o){o.forEach((function(e){var r=n.peers.get(e);r&&!t.has(e)&&!n.direct.has(e)&&r.protocol==T.RelayCodec&&n.score.score(e)>=n._options.scoreThresholds.gossipThreshold&&i.push(e)}));var a=this._options.Dlazy,s=T.RelayGossipFactor*i.length;s>a&&(a=s),a>i.length?a=i.length:b.shuffle(i),i.slice(0,a).forEach((function(t){var i=r;r.length>T.RelayMaxIHaveLength&&(i=b.shuffle(i.slice()).slice(0,T.RelayMaxIHaveLength)),n._pushGossip(t,{topicID:e,messageIDs:i})}))}}}},{key:"_makePrune",value:function(e,t,n){var r=this,i=T.RelayPruneBackoff/1e3,o=[];n&&O.getRelayPeers(this,t,T.RelayPrunePeers,(function(t){return t!==e&&r.score.score(t)>=0})).forEach((function(e){var t=k.default.createFromB58String(e);o.push({peerID:t.toBytes(),signedPeerRecord:r._libp2p.peerStore.addressBook.getRawEnvelope(t)})}));return{topicID:t,peers:o,backoff:i}}}]),f}(m.default);t.WakuRelay=_}).call(this,n(9).Buffer)},118:function(e,t,n){"use strict";(function(e){var r=n(3),i=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.ChatMessage=void 0;var o=n(44),a=n(493),s=function(){function t(e,n,i){r(this,t),this.timestamp=e,this.nick=n,this.message=i}return i(t,[{key:"encode",value:function(){var t=Math.floor(this.timestamp.valueOf()/1e3),n=e.from(this.message,"utf-8");return a.ChatMessageProto.encode({timestamp:t,nick:this.nick,payload:n}).finish()}}],[{key:"decode",value:function(e){var n=a.ChatMessageProto.decode(o.Reader.create(e)),r=new Date(1e3*n.timestamp),i=n.payload?Array.from(n.payload).map((function(e){return String.fromCharCode(e)})).join(""):"";return new t(r,n.nick,i)}}]),t}();t.ChatMessage=s}).call(this,n(9).Buffer)},160:function(e,t){},176:function(e,t){},186:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelayOpportunisticGraftPeers=t.RelayOpportunisticGraftTicks=t.RelayFanoutTTL=t.RelayPruneBackoff=t.RelayPrunePeers=t.RelayHeartbeatInterval=t.RelayHeartbeatInitialDelay=t.RelayDefaultTopic=t.RelayCodec=t.minute=t.second=void 0,t.second=1e3,t.minute=60*t.second,t.RelayCodec="/vac/waku/relay/2.0.0-beta2",t.RelayDefaultTopic="/waku/2/default-waku/proto",t.RelayHeartbeatInitialDelay=100,t.RelayHeartbeatInterval=t.second,t.RelayPrunePeers=16,t.RelayPruneBackoff=t.minute,t.RelayFanoutTTL=t.minute,t.RelayOpportunisticGraftTicks=60,t.RelayOpportunisticGraftPeers=2},237:function(e,t,n){"use strict";(function(e){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WakuMessageProto=t.protobufPackage=void 0;var i=r(n(167)),o=r(n(44));t.protobufPackage="waku.v2";var a={};t.WakuMessageProto={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default.Writer.create();return void 0!==e.payload&&t.uint32(10).bytes(e.payload),void 0!==e.contentTopic&&t.uint32(18).string(e.contentTopic),void 0!==e.version&&t.uint32(24).uint32(e.version),void 0!==e.timestamp&&t.uint32(33).double(e.timestamp),t},decode:function(e,t){for(var n=e instanceof o.default.Reader?e:new o.default.Reader(e),r=void 0===t?n.len:n.pos+t,i=Object.assign({},a);n.pos<r;){var s=n.uint32();switch(s>>>3){case 1:i.payload=n.bytes();break;case 2:i.contentTopic=n.string();break;case 3:i.version=n.uint32();break;case 4:i.timestamp=n.double();break;default:n.skipType(7&s)}}return i},fromJSON:function(e){var t=Object.assign({},a);return void 0!==e.payload&&null!==e.payload&&(t.payload=function(e){for(var t=u(e),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}(e.payload)),void 0!==e.contentTopic&&null!==e.contentTopic?t.contentTopic=String(e.contentTopic):t.contentTopic=void 0,void 0!==e.version&&null!==e.version?t.version=Number(e.version):t.version=void 0,void 0!==e.timestamp&&null!==e.timestamp?t.timestamp=Number(e.timestamp):t.timestamp=void 0,t},toJSON:function(e){var t={};return void 0!==e.payload&&(t.payload=void 0!==e.payload?function(e){for(var t=[],n=0;n<e.byteLength;++n)t.push(String.fromCharCode(e[n]));return c(t.join(""))}(e.payload):void 0),void 0!==e.contentTopic&&(t.contentTopic=e.contentTopic),void 0!==e.version&&(t.version=e.version),void 0!==e.timestamp&&(t.timestamp=e.timestamp),t},fromPartial:function(e){var t=Object.assign({},a);return void 0!==e.payload&&null!==e.payload?t.payload=e.payload:t.payload=void 0,void 0!==e.contentTopic&&null!==e.contentTopic?t.contentTopic=e.contentTopic:t.contentTopic=void 0,void 0!==e.version&&null!==e.version?t.version=e.version:t.version=void 0,void 0!==e.timestamp&&null!==e.timestamp?t.timestamp=e.timestamp:t.timestamp=void 0,t}};var s=function(){if("undefined"!==typeof s)return s;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof e)return e;throw"Unable to locate global object"}(),u=s.atob||function(e){return s.Buffer.from(e,"base64").toString("binary")};var c=s.btoa||function(e){return s.Buffer.from(e,"binary").toString("base64")};o.default.util.Long!==i.default&&(o.default.util.Long=i.default,o.default.configure())}).call(this,n(43))},267:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRelayPeers=void 0;var r=n(64),i=n(116);t.getRelayPeers=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0},a=e.topics.get(t);if(!a)return new Set;var s=[];return a.forEach((function(t){var n=e.peers.get(t);n&&n.protocol==i.RelayCodec&&o(t)&&s.push(t)})),s=r.shuffle(s),n>0&&s.length>n&&(s=s.slice(0,n)),new Set(s)}},268:function(e,t,n){"use strict";var r=n(3),i=n(5),o=n(15),a=n(16),s=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),u=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return u(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RelayHeartbeat=void 0;var l=n(263),d=n(64),f=c(n(186)),p=n(267),v=function(e){o(n,e);var t=a(n);function n(e){return r(this,n),t.call(this,e)}return i(n,[{key:"start",value:function(){var e=this;if(!this._heartbeatTimer){var t=this._heartbeat.bind(this),n=setTimeout((function(){var n;t(),null===(n=e._heartbeatTimer)||void 0===n||n.runPeriodically(t,f.RelayHeartbeatInterval)}),f.RelayHeartbeatInitialDelay);this._heartbeatTimer={_intervalId:void 0,runPeriodically:function(t,n){e._heartbeatTimer._intervalId=setInterval(t,n)},cancel:function(){var t;clearTimeout(n),clearInterval(null===(t=e._heartbeatTimer)||void 0===t?void 0:t._intervalId)}}}}},{key:"stop",value:function(){this._heartbeatTimer&&(this._heartbeatTimer.cancel(),this._heartbeatTimer=null)}},{key:"_heartbeat",value:function(){var e=this,t=this.gossipsub._options,n=t.D,r=t.Dlo,i=t.Dhi,o=t.Dscore,a=t.Dout;this.gossipsub.heartbeatTicks++;var s=new Map,u=function(t){var n=s.get(t);return void 0===n&&(n=e.gossipsub.score.score(t),s.set(t,n)),n},c=new Map,l=new Map,v=new Map;this.gossipsub._clearBackoff(),this.gossipsub.peerhave.clear(),this.gossipsub.iasked.clear(),this.gossipsub._applyIwantPenalties(),this.gossipsub._directConnect(),this.gossipsub.mesh.forEach((function(t,s){var g=function(n){e.gossipsub.log("HEARTBEAT: Remove mesh link to %s in %s",n,s),e.gossipsub.score.prune(n,s),e.gossipsub._addBackoff(n,s),t.delete(n);var r=l.get(n);r?r.push(s):l.set(n,[s])},h=function(n){e.gossipsub.log("HEARTBEAT: Add mesh link to %s in %s",n,s),e.gossipsub.score.graft(n,s),t.add(n);var r=c.get(n);r?r.push(s):c.set(n,[s])};if(t.forEach((function(t){var n=u(t);n<0&&(e.gossipsub.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",t,n,s),g(t),v.set(t,!0))})),t.size<r){var m=e.gossipsub.backoff.get(s),b=n-t.size;p.getRelayPeers(e.gossipsub,s,b,(function(n){return!t.has(n)&&!e.gossipsub.direct.has(n)&&(!m||!m.has(n))&&u(n)>=0})).forEach(h)}if(t.size>i){var y=Array.from(t);y.sort((function(e,t){return u(t)-u(e)})),y=y.slice(0,o).concat(d.shuffle(y.slice(o)));var k=0;if(y.slice(0,n).forEach((function(t){e.gossipsub.outbound.get(t)&&k++})),k<a){var T=function(e){for(var t=y[e],n=e;n>0;n--)y[n]=y[n-1];y[0]=t};if(k>0)for(var O=k,I=1;I<n&&O>0;I++)e.gossipsub.outbound.get(y[I])&&(T(I),O--);for(var _=n-k,w=n;w<y.length&&_>0;w++)e.gossipsub.outbound.get(y[w])&&(T(w),_--)}y.slice(n).forEach(g)}if(t.size>=r){var R=0;if(t.forEach((function(t){e.gossipsub.outbound.get(t)&&R++})),R<a){var P=a-R,S=e.gossipsub.backoff.get(s);p.getRelayPeers(e.gossipsub,s,P,(function(n){return!t.has(n)&&!e.gossipsub.direct.has(n)&&(!S||!S.has(n))&&u(n)>=0})).forEach(h)}}if(e.gossipsub.heartbeatTicks%f.RelayOpportunisticGraftTicks===0&&t.size>1){var j=Array.from(t).sort((function(e,t){return u(e)-u(t)})),N=t.size/2,E=u(j[N]);if(E<e.gossipsub._options.scoreThresholds.opportunisticGraftThreshold){var C=e.gossipsub.backoff.get(s);p.getRelayPeers(e.gossipsub,s,f.RelayOpportunisticGraftPeers,(function(n){return t.has(n)&&!e.gossipsub.direct.has(n)&&(!C||!C.has(n))&&u(n)>E})).forEach((function(t){e.gossipsub.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",t,s),h(t)}))}}e.gossipsub._emitGossip(s,t)}));var g=this.gossipsub._now();this.gossipsub.lastpub.forEach((function(t,n){t+f.RelayFanoutTTL<g&&(e.gossipsub.fanout.delete(n),e.gossipsub.lastpub.delete(n))})),this.gossipsub.fanout.forEach((function(t,r){var i=e.gossipsub.topics.get(r);if(t.forEach((function(n){(!(null===i||void 0===i?void 0:i.has(n))||u(n)<e.gossipsub._options.scoreThresholds.publishThreshold)&&t.delete(n)})),t.size<n){var o=n-t.size;p.getRelayPeers(e.gossipsub,r,o,(function(n){return!t.has(n)&&!e.gossipsub.direct.has(n)&&u(n)>=e.gossipsub._options.scoreThresholds.publishThreshold})).forEach((function(e){t.add(e)}))}e.gossipsub._emitGossip(r,t)})),this.gossipsub._sendGraftPrune(c,l,v),this.gossipsub._flush(),this.gossipsub.messageCache.shift(),this.gossipsub.emit("gossipsub:heartbeat")}}]),n}(l.Heartbeat);t.RelayHeartbeat=v},332:function(e,t,n){"use strict";var r=n(47),i=n(1),o=n(4),a=n(3),s=n(5),u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=u(n(641)),l=u(n(788)),d=n(797),f=u(n(825)),p=u(n(325)),v=n(116),g=n(852),h=f.default.prototype[Symbol.toStringTag],m=function(){function e(t,n){a(this,e),this.libp2p=t,this.relay=t.pubsub,this.store=n}return s(e,[{key:"dial",value:function(){var e=o(i.mark((function e(t){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.libp2p.dialProtocol(t,[v.RelayCodec,g.StoreCodec]);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dialWithMultiAddr",value:function(){var e=o(i.mark((function e(t,n){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.libp2p.peerStore.addressBook.set(t,n);case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=o(i.mark((function e(){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.libp2p.stop();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getLocalMultiaddrWithID",value:function(){var e=this.libp2p.multiaddrs.find((function(e){return e.toString().match(/127\.0\.0\.1/)}));if(!e||""===e.toString())throw"Not listening on localhost";return e+"/p2p/"+this.libp2p.peerId.toB58String()}}],[{key:"create",value:function(){var t=o(i.mark((function t(n){var o,a,s,u,m,b;return i.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(s=Object.assign({listenAddresses:[],staticNoiseKey:void 0},n)).config=Object.assign({transport:r({},h,{filter:p.default.all})},n.config),s.modules=Object.assign({},n.modules),u=[f.default],(null===(o=s.modules)||void 0===o?void 0:o.transport)&&(u=u.concat(null===(a=s.modules)||void 0===a?void 0:a.transport)),t.next=7,c.default.create({addresses:{listen:s.listenAddresses},modules:{transport:u,streamMuxer:[l.default],connEncryption:[new d.Noise(s.staticNoiseKey)],pubsub:v.WakuRelay},config:s.config});case 7:return m=t.sent,b=new g.WakuStore(m),t.next=11,m.start();case 11:return t.abrupt("return",new e(m,b));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}();t.default=m},347:function(e,t,n){},450:function(e,t){},451:function(e,t){},478:function(e,t,n){},493:function(e,t,n){"use strict";(function(e){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ChatMessageProto=t.protobufPackage=void 0;var i=r(n(167)),o=r(n(44));t.protobufPackage="chat.v2";var a={timestamp:0,nick:""};t.ChatMessageProto={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default.Writer.create();return 0!==e.timestamp&&t.uint32(8).uint64(e.timestamp),""!==e.nick&&t.uint32(18).string(e.nick),0!==e.payload.length&&t.uint32(26).bytes(e.payload),t},decode:function(e,t){var n=e instanceof o.default.Reader?e:new o.default.Reader(e),r=void 0===t?n.len:n.pos+t,i=Object.assign({},a);for(i.payload=new Uint8Array;n.pos<r;){var s=n.uint32();switch(s>>>3){case 1:i.timestamp=l(n.uint64());break;case 2:i.nick=n.string();break;case 3:i.payload=n.bytes();break;default:n.skipType(7&s)}}return i},fromJSON:function(e){var t=Object.assign({},a);return t.payload=new Uint8Array,void 0!==e.timestamp&&null!==e.timestamp?t.timestamp=Number(e.timestamp):t.timestamp=0,void 0!==e.nick&&null!==e.nick?t.nick=String(e.nick):t.nick="",void 0!==e.payload&&null!==e.payload&&(t.payload=function(e){for(var t=u(e),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}(e.payload)),t},toJSON:function(e){var t={};return void 0!==e.timestamp&&(t.timestamp=e.timestamp),void 0!==e.nick&&(t.nick=e.nick),void 0!==e.payload&&(t.payload=function(e){for(var t=[],n=0;n<e.byteLength;++n)t.push(String.fromCharCode(e[n]));return c(t.join(""))}(void 0!==e.payload?e.payload:new Uint8Array)),t},fromPartial:function(e){var t=Object.assign({},a);return void 0!==e.timestamp&&null!==e.timestamp?t.timestamp=e.timestamp:t.timestamp=0,void 0!==e.nick&&null!==e.nick?t.nick=e.nick:t.nick="",void 0!==e.payload&&null!==e.payload?t.payload=e.payload:t.payload=new Uint8Array,t}};var s=function(){if("undefined"!==typeof s)return s;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof e)return e;throw"Unable to locate global object"}(),u=s.atob||function(e){return s.Buffer.from(e,"base64").toString("binary")};var c=s.btoa||function(e){return s.Buffer.from(e,"binary").toString("base64")};function l(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new s.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}o.default.util.Long!==i.default&&(o.default.util.Long=i.default,o.default.configure())}).call(this,n(43))},574:function(e,t){},575:function(e,t){},711:function(e,t){},779:function(e,t){},828:function(e,t){},852:function(e,t,n){"use strict";var r=n(1),i=n(4),o=n(3),a=n(5),s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WakuStore=t.StoreCodec=void 0;var u=s(n(853)),c=s(n(130)),l=s(n(41)),d=n(96),f=n(854);t.StoreCodec="/vac/waku/store/2.0.0-beta1";var p=function(){function e(t){o(this,e),this.libp2p=t}return a(e,[{key:"queryHistory",value:function(){var e=i(r.mark((function e(n,i){var o,a,s,p,v,g,h,m,b,y,k,T,O,I,_,w;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v=this.libp2p.peerStore.get(n)){e.next=3;break}throw"Peer is unknown";case 3:if(v.protocols.includes(t.StoreCodec)){e.next=5;break}throw"Peer does not register waku store protocol";case 5:if(g=this.libp2p.connectionManager.get(v.id)){e.next=8;break}throw"Failed to get a connection to the peer";case 8:h=[],m=void 0;case 10:return e.prev=11,e.next=14,g.newStream(t.StoreCodec);case 14:return b=e.sent,y=b.stream,e.prev=16,k=f.HistoryRPC.createQuery(i,m),e.next=20,l.default([k.encode()],c.default.encode(),y,c.default.decode(),u.default);case 20:if(T=e.sent,e.prev=21,O=f.HistoryRPC.decode(T.slice()),I=O.response){e.next=27;break}return console.log("No response in HistoryRPC"),e.abrupt("return",null);case 27:if(I.messages&&I.messages.length){e.next=29;break}return e.abrupt("return",h);case 29:if(I.messages.map((function(e){h.push(d.WakuMessage.fromProto(e))})),_=null===(o=I.pagingInfo)||void 0===o?void 0:o.pageSize,w=null===(s=null===(a=k.query)||void 0===a?void 0:a.pagingInfo)||void 0===s?void 0:s.pageSize,!(_&&w&&_<w)){e.next=34;break}return e.abrupt("return",h);case 34:if(void 0!==(m=null===(p=I.pagingInfo)||void 0===p?void 0:p.cursor)){e.next=38;break}return console.log("No cursor returned by peer."),e.abrupt("return",h);case 38:e.next=43;break;case 40:e.prev=40,e.t0=e.catch(21),console.log("Failed to decode store reply",e.t0);case 43:e.next=48;break;case 45:e.prev=45,e.t1=e.catch(16),console.log("Failed to send waku store query",e.t1);case 48:e.next=53;break;case 50:e.prev=50,e.t2=e.catch(11),console.log("Failed to negotiate waku store protocol stream with peer",e.t2);case 53:e.next=10;break;case 55:case"end":return e.stop()}}),e,this,[[11,50],[16,45],[21,40]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();t.WakuStore=p},854:function(e,t,n){"use strict";var r=n(3),i=n(5),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.HistoryRPC=void 0;var u=n(44),c=n(855),l=s(n(858)),d=n(96),f=function(){function e(t){r(this,e),this.proto=t}return i(e,[{key:"encode",value:function(){return l.HistoryRPC.encode(this.proto).finish()}},{key:"query",get:function(){return this.proto.query}},{key:"response",get:function(){return this.proto.response}}],[{key:"createQuery",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[d.DEFAULT_CONTENT_TOPIC],n=arguments.length>1?arguments[1]:void 0,r={pageSize:10,cursor:n,direction:l.PagingInfo_Direction.DIRECTION_FORWARD},i=t.map((function(e){return{contentTopic:e}}));return new e({requestId:c.v4(),query:{contentFilters:i,pagingInfo:r,startTime:void 0,endTime:void 0},response:void 0})}},{key:"decode",value:function(t){return new e(l.HistoryRPC.decode(u.Reader.create(t)))}}]),e}();t.HistoryRPC=f},858:function(e,t,n){"use strict";(function(e){var r=n(8),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HistoryRPC=t.HistoryResponse=t.HistoryQuery=t.ContentFilter=t.PagingInfo=t.Index=t.pagingInfo_DirectionToJSON=t.pagingInfo_DirectionFromJSON=t.PagingInfo_Direction=t.protobufPackage=void 0;var o,a=i(n(167)),s=i(n(44)),u=n(237);function c(e){switch(e){case 0:case"DIRECTION_BACKWARD_UNSPECIFIED":return o.DIRECTION_BACKWARD_UNSPECIFIED;case 1:case"DIRECTION_FORWARD":return o.DIRECTION_FORWARD;case-1:case"UNRECOGNIZED":default:return o.UNRECOGNIZED}}function l(e){switch(e){case o.DIRECTION_BACKWARD_UNSPECIFIED:return"DIRECTION_BACKWARD_UNSPECIFIED";case o.DIRECTION_FORWARD:return"DIRECTION_FORWARD";default:return"UNKNOWN"}}t.protobufPackage="waku.v2",function(e){e[e.DIRECTION_BACKWARD_UNSPECIFIED=0]="DIRECTION_BACKWARD_UNSPECIFIED",e[e.DIRECTION_FORWARD=1]="DIRECTION_FORWARD",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(o=t.PagingInfo_Direction||(t.PagingInfo_Direction={})),t.pagingInfo_DirectionFromJSON=c,t.pagingInfo_DirectionToJSON=l;var d={receivedTime:0};t.Index={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.default.Writer.create();return 0!==e.digest.length&&t.uint32(10).bytes(e.digest),0!==e.receivedTime&&t.uint32(17).double(e.receivedTime),t},decode:function(e,t){var n=e instanceof s.default.Reader?e:new s.default.Reader(e),r=void 0===t?n.len:n.pos+t,i=Object.assign({},d);for(i.digest=new Uint8Array;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.digest=n.bytes();break;case 2:i.receivedTime=n.double();break;default:n.skipType(7&o)}}return i},fromJSON:function(e){var t=Object.assign({},d);return t.digest=new Uint8Array,void 0!==e.digest&&null!==e.digest&&(t.digest=function(e){for(var t=b(e),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}(e.digest)),void 0!==e.receivedTime&&null!==e.receivedTime?t.receivedTime=Number(e.receivedTime):t.receivedTime=0,t},toJSON:function(e){var t={};return void 0!==e.digest&&(t.digest=function(e){for(var t=[],n=0;n<e.byteLength;++n)t.push(String.fromCharCode(e[n]));return y(t.join(""))}(void 0!==e.digest?e.digest:new Uint8Array)),void 0!==e.receivedTime&&(t.receivedTime=e.receivedTime),t},fromPartial:function(e){var t=Object.assign({},d);return void 0!==e.digest&&null!==e.digest?t.digest=e.digest:t.digest=new Uint8Array,void 0!==e.receivedTime&&null!==e.receivedTime?t.receivedTime=e.receivedTime:t.receivedTime=0,t}};var f={pageSize:0,direction:0};t.PagingInfo={encode:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.default.Writer.create();return 0!==e.pageSize&&n.uint32(8).uint64(e.pageSize),void 0!==e.cursor&&t.Index.encode(e.cursor,n.uint32(18).fork()).ldelim(),0!==e.direction&&n.uint32(24).int32(e.direction),n},decode:function(e,n){for(var r=e instanceof s.default.Reader?e:new s.default.Reader(e),i=void 0===n?r.len:r.pos+n,o=Object.assign({},f);r.pos<i;){var a=r.uint32();switch(a>>>3){case 1:o.pageSize=k(r.uint64());break;case 2:o.cursor=t.Index.decode(r,r.uint32());break;case 3:o.direction=r.int32();break;default:r.skipType(7&a)}}return o},fromJSON:function(e){var n=Object.assign({},f);return void 0!==e.pageSize&&null!==e.pageSize?n.pageSize=Number(e.pageSize):n.pageSize=0,void 0!==e.cursor&&null!==e.cursor?n.cursor=t.Index.fromJSON(e.cursor):n.cursor=void 0,void 0!==e.direction&&null!==e.direction?n.direction=c(e.direction):n.direction=0,n},toJSON:function(e){var n={};return void 0!==e.pageSize&&(n.pageSize=e.pageSize),void 0!==e.cursor&&(n.cursor=e.cursor?t.Index.toJSON(e.cursor):void 0),void 0!==e.direction&&(n.direction=l(e.direction)),n},fromPartial:function(e){var n=Object.assign({},f);return void 0!==e.pageSize&&null!==e.pageSize?n.pageSize=e.pageSize:n.pageSize=0,void 0!==e.cursor&&null!==e.cursor?n.cursor=t.Index.fromPartial(e.cursor):n.cursor=void 0,void 0!==e.direction&&null!==e.direction?n.direction=e.direction:n.direction=0,n}};var p={contentTopic:""};t.ContentFilter={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.default.Writer.create();return""!==e.contentTopic&&t.uint32(10).string(e.contentTopic),t},decode:function(e,t){for(var n=e instanceof s.default.Reader?e:new s.default.Reader(e),r=void 0===t?n.len:n.pos+t,i=Object.assign({},p);n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.contentTopic=n.string();break;default:n.skipType(7&o)}}return i},fromJSON:function(e){var t=Object.assign({},p);return void 0!==e.contentTopic&&null!==e.contentTopic?t.contentTopic=String(e.contentTopic):t.contentTopic="",t},toJSON:function(e){var t={};return void 0!==e.contentTopic&&(t.contentTopic=e.contentTopic),t},fromPartial:function(e){var t=Object.assign({},p);return void 0!==e.contentTopic&&null!==e.contentTopic?t.contentTopic=e.contentTopic:t.contentTopic="",t}};var v={};t.HistoryQuery={encode:function(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.default.Writer.create(),o=r(e.contentFilters);try{for(o.s();!(n=o.n()).done;){var a=n.value;t.ContentFilter.encode(a,i.uint32(18).fork()).ldelim()}}catch(u){o.e(u)}finally{o.f()}return void 0!==e.pagingInfo&&t.PagingInfo.encode(e.pagingInfo,i.uint32(26).fork()).ldelim(),void 0!==e.startTime&&i.uint32(33).double(e.startTime),void 0!==e.endTime&&i.uint32(41).double(e.endTime),i},decode:function(e,n){var r=e instanceof s.default.Reader?e:new s.default.Reader(e),i=void 0===n?r.len:r.pos+n,o=Object.assign({},v);for(o.contentFilters=[];r.pos<i;){var a=r.uint32();switch(a>>>3){case 2:o.contentFilters.push(t.ContentFilter.decode(r,r.uint32()));break;case 3:o.pagingInfo=t.PagingInfo.decode(r,r.uint32());break;case 4:o.startTime=r.double();break;case 5:o.endTime=r.double();break;default:r.skipType(7&a)}}return o},fromJSON:function(e){var n=Object.assign({},v);if(n.contentFilters=[],void 0!==e.contentFilters&&null!==e.contentFilters){var i,o=r(e.contentFilters);try{for(o.s();!(i=o.n()).done;){var a=i.value;n.contentFilters.push(t.ContentFilter.fromJSON(a))}}catch(s){o.e(s)}finally{o.f()}}return void 0!==e.pagingInfo&&null!==e.pagingInfo?n.pagingInfo=t.PagingInfo.fromJSON(e.pagingInfo):n.pagingInfo=void 0,void 0!==e.startTime&&null!==e.startTime?n.startTime=Number(e.startTime):n.startTime=void 0,void 0!==e.endTime&&null!==e.endTime?n.endTime=Number(e.endTime):n.endTime=void 0,n},toJSON:function(e){var n={};return e.contentFilters?n.contentFilters=e.contentFilters.map((function(e){return e?t.ContentFilter.toJSON(e):void 0})):n.contentFilters=[],void 0!==e.pagingInfo&&(n.pagingInfo=e.pagingInfo?t.PagingInfo.toJSON(e.pagingInfo):void 0),void 0!==e.startTime&&(n.startTime=e.startTime),void 0!==e.endTime&&(n.endTime=e.endTime),n},fromPartial:function(e){var n=Object.assign({},v);if(n.contentFilters=[],void 0!==e.contentFilters&&null!==e.contentFilters){var i,o=r(e.contentFilters);try{for(o.s();!(i=o.n()).done;){var a=i.value;n.contentFilters.push(t.ContentFilter.fromPartial(a))}}catch(s){o.e(s)}finally{o.f()}}return void 0!==e.pagingInfo&&null!==e.pagingInfo?n.pagingInfo=t.PagingInfo.fromPartial(e.pagingInfo):n.pagingInfo=void 0,void 0!==e.startTime&&null!==e.startTime?n.startTime=e.startTime:n.startTime=void 0,void 0!==e.endTime&&null!==e.endTime?n.endTime=e.endTime:n.endTime=void 0,n}};var g={};t.HistoryResponse={encode:function(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.default.Writer.create(),o=r(e.messages);try{for(o.s();!(n=o.n()).done;){var a=n.value;u.WakuMessageProto.encode(a,i.uint32(10).fork()).ldelim()}}catch(c){o.e(c)}finally{o.f()}return void 0!==e.pagingInfo&&t.PagingInfo.encode(e.pagingInfo,i.uint32(18).fork()).ldelim(),i},decode:function(e,n){var r=e instanceof s.default.Reader?e:new s.default.Reader(e),i=void 0===n?r.len:r.pos+n,o=Object.assign({},g);for(o.messages=[];r.pos<i;){var a=r.uint32();switch(a>>>3){case 1:o.messages.push(u.WakuMessageProto.decode(r,r.uint32()));break;case 2:o.pagingInfo=t.PagingInfo.decode(r,r.uint32());break;default:r.skipType(7&a)}}return o},fromJSON:function(e){var n=Object.assign({},g);if(n.messages=[],void 0!==e.messages&&null!==e.messages){var i,o=r(e.messages);try{for(o.s();!(i=o.n()).done;){var a=i.value;n.messages.push(u.WakuMessageProto.fromJSON(a))}}catch(s){o.e(s)}finally{o.f()}}return void 0!==e.pagingInfo&&null!==e.pagingInfo?n.pagingInfo=t.PagingInfo.fromJSON(e.pagingInfo):n.pagingInfo=void 0,n},toJSON:function(e){var n={};return e.messages?n.messages=e.messages.map((function(e){return e?u.WakuMessageProto.toJSON(e):void 0})):n.messages=[],void 0!==e.pagingInfo&&(n.pagingInfo=e.pagingInfo?t.PagingInfo.toJSON(e.pagingInfo):void 0),n},fromPartial:function(e){var n=Object.assign({},g);if(n.messages=[],void 0!==e.messages&&null!==e.messages){var i,o=r(e.messages);try{for(o.s();!(i=o.n()).done;){var a=i.value;n.messages.push(u.WakuMessageProto.fromPartial(a))}}catch(s){o.e(s)}finally{o.f()}}return void 0!==e.pagingInfo&&null!==e.pagingInfo?n.pagingInfo=t.PagingInfo.fromPartial(e.pagingInfo):n.pagingInfo=void 0,n}};var h={requestId:""};t.HistoryRPC={encode:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.default.Writer.create();return""!==e.requestId&&n.uint32(10).string(e.requestId),void 0!==e.query&&t.HistoryQuery.encode(e.query,n.uint32(18).fork()).ldelim(),void 0!==e.response&&t.HistoryResponse.encode(e.response,n.uint32(26).fork()).ldelim(),n},decode:function(e,n){for(var r=e instanceof s.default.Reader?e:new s.default.Reader(e),i=void 0===n?r.len:r.pos+n,o=Object.assign({},h);r.pos<i;){var a=r.uint32();switch(a>>>3){case 1:o.requestId=r.string();break;case 2:o.query=t.HistoryQuery.decode(r,r.uint32());break;case 3:o.response=t.HistoryResponse.decode(r,r.uint32());break;default:r.skipType(7&a)}}return o},fromJSON:function(e){var n=Object.assign({},h);return void 0!==e.requestId&&null!==e.requestId?n.requestId=String(e.requestId):n.requestId="",void 0!==e.query&&null!==e.query?n.query=t.HistoryQuery.fromJSON(e.query):n.query=void 0,void 0!==e.response&&null!==e.response?n.response=t.HistoryResponse.fromJSON(e.response):n.response=void 0,n},toJSON:function(e){var n={};return void 0!==e.requestId&&(n.requestId=e.requestId),void 0!==e.query&&(n.query=e.query?t.HistoryQuery.toJSON(e.query):void 0),void 0!==e.response&&(n.response=e.response?t.HistoryResponse.toJSON(e.response):void 0),n},fromPartial:function(e){var n=Object.assign({},h);return void 0!==e.requestId&&null!==e.requestId?n.requestId=e.requestId:n.requestId="",void 0!==e.query&&null!==e.query?n.query=t.HistoryQuery.fromPartial(e.query):n.query=void 0,void 0!==e.response&&null!==e.response?n.response=t.HistoryResponse.fromPartial(e.response):n.response=void 0,n}};var m=function(){if("undefined"!==typeof m)return m;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof e)return e;throw"Unable to locate global object"}(),b=m.atob||function(e){return m.Buffer.from(e,"base64").toString("binary")};var y=m.btoa||function(e){return m.Buffer.from(e,"binary").toString("base64")};function k(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new m.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}s.default.util.Long!==a.default&&(s.default.util.Long=a.default,s.default.configure())}).call(this,n(43))},859:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),o=n(25),a=n.n(o),s=(n(347),n(1)),u=n.n(s),c=n(35),l=n(42),d=n(888),f=n(30),p=n(204),v=n.n(p),g=(n(478),n(118)),h=n(96),m=n(116),b=n(885),y=n(894),k=n(891),T=n(895),O=n(889),I=n(892),_=n(890),w=Object(r.createContext)({waku:void 0}),R=function(){return Object(r.useContext)(w)},P=n(21);function S(e){var t=Object(r.useState)(""),n=Object(l.a)(t,2),i=n[0],o=n[1],a=R().waku,s=function(){e.sendMessage(),o("")};return Object(P.jsxs)(b.a,{container:!0,spacing:2,direction:"row",alignItems:"center",children:[Object(P.jsx)(b.a,{item:!0,xs:11,children:Object(P.jsx)(I.a,{variant:"outlined",label:"Send a message",value:i,fullWidth:!0,style:{margin:8},margin:"normal",InputLabelProps:{shrink:!0},onChange:function(t){o(t.target.value),e.messageHandler(t.target.value)},onKeyPress:function(e){"Enter"===e.key&&s()},disabled:!a})}),Object(P.jsx)(b.a,{item:!0,xs:1,children:Object(P.jsx)(_.a,{variant:"contained",color:"primary",size:"large",onClick:s,disabled:!a,children:"Send"})})]})}function j(e){var t=Object(r.useState)(""),n=Object(l.a)(t,2),i=n[0],o=n[1],a=R().waku,s=function(){var t=Object(c.a)(u.a.mark((function t(){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.startsWith("/")){t.next=4;break}e.commandHandler(i),t.next=8;break;case 4:return n=new g.ChatMessage(new Date,"web-chat",i),r=h.WakuMessage.fromBytes(n.encode(),x),t.next=8,a.relay.send(r);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(P.jsxs)(b.a,{container:!0,spacing:2,children:[Object(P.jsx)(b.a,{item:!0,xs:12,children:Object(P.jsx)(y.a,{height:800,maxHeight:800,style:{flex:1,maxHeight:"100%",overflow:"scroll"},children:Object(P.jsx)(N,{messages:e.lines})})}),Object(P.jsx)(b.a,{item:!0,xs:12,children:Object(P.jsx)(S,{messageHandler:function(e){o(e)},sendMessage:s})})]})}var N=function(e){var t=[];for(var n in e.messages)t.push(Object(P.jsx)(k.a,{children:Object(P.jsx)(T.a,{primary:E(e.messages[n])},"chat-message-"+n)}));return Object(P.jsx)(O.a,{dense:!0,children:t})};function E(e){var t=e.timestamp.toLocaleString([],{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!1});return"<".concat(t,"> ").concat(e.nick,": ").concat(e.message)}var C=n(332),D=n.n(C),x="dingpu";function M(){var e=Object(r.useState)({messages:[]}),t=Object(l.a)(e,2),n=t[0],i=t[1];Object(r.useEffect)((function(){function e(){return(e=Object(c.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.a.create({config:{pubsub:{enabled:!0,emitSelf:!0}}});case 3:t=e.sent,i((function(e){var n=e.messages;return{waku:t,messages:n}})),t.libp2p.peerStore.addressBook.add(v.a.createFromB58String("16Uiu2HAmVVi6Q4j7MAKVibquW8aA27UNrA4Q8Wkz9EetGViu8ZF1"),[Object(f.multiaddr)("/ip4/134.209.113.86/tcp/9001/ws")]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Issue starting waku ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var t=function(e){var t=h.WakuMessage.decode(e.data);if(t.payload){var r=g.ChatMessage.decode(t.payload),o=n.messages.slice();o.push(r),console.log("setState on ",o),i({messages:o,waku:n.waku})}};if(n.waku)return n.waku.libp2p.pubsub.on(m.RelayDefaultTopic,t),function(){var e;null===(e=n.waku)||void 0===e||e.libp2p.pubsub.removeListener(m.RelayDefaultTopic,t)};(function(){return e.apply(this,arguments)})().then((function(){return console.log("Waku init done")})).catch((function(e){return console.log("Waku init failed ",e)}))}));return Object(P.jsx)("div",{className:"App",children:Object(P.jsx)("div",{className:"chat-room",children:Object(P.jsx)(w.Provider,{value:{waku:n.waku},children:Object(P.jsx)(d.a,{children:Object(P.jsx)(j,{lines:n.messages,commandHandler:function(e){var t=[],r=e.split(" "),o=r.shift(),a=n.waku;if(a)switch(o){case"/help":t.push("/connect <Multiaddr>: connect to the given peer"),t.push("/help: Display this help");break;case"/connect":var s=r.shift();if(s)try{var u=Object(f.multiaddr)(s),c=u.getPeerId();c?a.libp2p.peerStore.addressBook.add(v.a.createFromB58String(c),[u]):t.push("Peer Id needed to dial")}catch(l){t.push("Invalid multaddr: "+l)}else t.push("No peer provided");break;case"/peers":a.libp2p.peerStore.peers.forEach((function(e,n){t.push(n+":");var r="  addresses: [";e.addresses.forEach((function(e){var t=e.multiaddr;r+=" "+t.toString()+","})),r=r.replace(/,$/,""),r+="]",t.push(r);var i="  protos: [";i+=e.protocols,i+="]",t.push(i)}));break;default:t.push("Unknown Command")}else t.push("Waku is not yet initialized");i((function(e){var n=e.waku,r=e.messages;return t.forEach((function(e){r.push(new g.ChatMessage(new Date,o,e))})),{waku:n,messages:r}}))}})})})})})}a.a.render(Object(P.jsx)(i.a.StrictMode,{children:Object(P.jsx)(M,{})}),document.getElementById("root"))},96:function(e,t,n){"use strict";(function(e){var r=n(3),i=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.WakuMessage=t.DEFAULT_CONTENT_TOPIC=void 0;var o=n(44),a=n(237);t.DEFAULT_CONTENT_TOPIC="/waku/2/default-content/proto";var s=function(){function n(e,t,i){r(this,n),this.payload=e,this.contentTopic=t,this.version=i}return i(n,[{key:"toBinary",value:function(){return a.WakuMessageProto.encode({payload:this.payload,version:this.version,contentTopic:this.contentTopic}).finish()}},{key:"utf8Payload",value:function(){return this.payload?Array.from(this.payload).map((function(e){return String.fromCharCode(e)})).join(""):""}},{key:"isEqualTo",value:function(t){return(this.payload&&t.payload?0===e.compare(this.payload,t.payload):!(this.payload||t.payload))&&this.contentTopic===t.contentTopic&&this.version===t.version}}],[{key:"fromProto",value:function(e){return new n(e.payload,e.contentTopic,e.version)}},{key:"fromUtf8String",value:function(r){return new n(e.from(r,"utf-8"),t.DEFAULT_CONTENT_TOPIC,0)}},{key:"fromBytes",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DEFAULT_CONTENT_TOPIC;return new n(e,r,0)}},{key:"decode",value:function(e){var t=a.WakuMessageProto.decode(o.Reader.create(e));return new n(t.payload,t.contentTopic,t.version)}}]),n}();t.WakuMessage=s}).call(this,n(9).Buffer)}},[[859,1,2]]]);
//# sourceMappingURL=main.3e14e7e8.chunk.js.map